[
    {
	"ts": 1687012031,
	"action": "harvest",
	"slot": "b1",
	"comment": "Harvest Chilli. This also causes the update below, which bumps AWS version."
    },{
	"ts": 1687012056,
	"action": "ignore",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/rejected",
	"comment": "This is the Agrilution app sending an invalid update, ignore"
    },{
	"ts": 1687012061,
	"action": "bumpAWSVersion",
	"comment": "AWS Shadow accepts the update below"
    },{
	"ts": 1687012061,
	"action": "ignore",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"comment": "AWS Shadow accepting a harvesting message from the app"
    },{
	"ts": 1687012151,
	"action": "ignore",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"comment": "This is AWS Shadow accepting a recipe update from Agrilution. It has no ClientToken, so will be ignored by the Mongoose processing, see https://github.com/mongoose-os-libs/aws/blob/2.14.0/src/mgos_aws_shadow.c#L335 "
    },{
	"ts": 1687012263.717,
	"action": "bumpAWSVersion",
	"comment": "AWS Shadow accepts the update below"
    },{
	"ts": 1687012263.717,
	"action": "ignore",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"comment": "AWS Shadow accepting a nutrient-filled message from the app"
    },{
	"ts": 1687012682,
	"action": "ignore",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"comment": "AWS Shadow accepting the cinema mode message below from the app, with the app's ClientToken, which will be ignored as covered under ..151 above"
    },{
	"ts": 1687012682,
	"action": "cinema",
	"comment": "Cinema mode triggered via app"
    },{
	"ts": 1687012682,
	"action": "replace",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/delta",
	"regex": ",\"clientToken\":[^\\}]+",
	"replacement": "",
	"comment": "This delta message includes the app's client token. The Mongoose Shadow code assumes delta messages don't contain a clientToken, so this is ignored, but we're correctly not generating one here, so our messages differ. Remove the clientToken."
    },{
	"ts": 1687012742,
	"action": "defaultMode",
	"comment": "Default mode (cinema mode off) triggered via app"
    },{
	"ts": 1687012742,
	"action": "replace",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/delta",
	"regex": ",\"clientToken\":[^\\}]+",
	"replacement": "",
	"comment": "This delta message includes the app's client token. The Mongoose Shadow code assumes delta messages don't contain a clientToken, so this is ignored, but we're correctly not generating one here, so our messages differ. Remove the clientToken."
    },{
	"ts": 1687012742.992,
	"action": "ignore",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"comment": "AWS Shadow accepting the default mode message above from the app, with the app's ClientToken, which will be ignored as covered under ..151 above"
    },{
	"ts": 1687012743.403,
	"action": "replace",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"regex": "\"desired\"[^,]+,",
	"replacement": "",
	"comment": "This update accepted message includes a desired{} block and no client token. We also don't send a client token. Without one, it won't be processed Mongoose-side, but since we don't send a desired block, the messages don't match. Strip it."
    },{
	"ts": 1687012745.227,
	"action": "replace",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/delta",
	"regex": ",\"clientToken\":[^\\}]+",
	"replacement": "",
	"comment": "This delta message includes the app's client token. The Mongoose Shadow code assumes delta messages don't contain a clientToken, so this is ignored, but we're correctly not generating one here, so our messages differ. Remove the clientToken."
    },{
	"ts": 1687012745.227,
	"action": "swap",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/delta",
	"versionOK": true,
	"comment": "In response to a change, AWS sometimes does update/delta then update/accepted and sometimes does update/accepted then update/delta. There's no apparent logic to this. We always do the latter. In this case, AWS did the former, so we'll swap that message order."
    },{
	"ts": 1687013043,
	"action": "ignore",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"comment": "AWS Shadow accepting the silent mode message below from the app, with the app's ClientToken, which will be ignored as covered under ..151 above"
    },{
	"ts": 1687013043,
	"action": "silent",
	"comment": "Silent mode triggered via app"
    },{
	"ts": 1687013043.439,
	"action": "replace",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/delta",
	"regex": ",\"clientToken\":[^\\}]+",
	"replacement": "",
	"comment": "This delta message includes the app's client token. The Mongoose Shadow code assumes delta messages don't contain a clientToken, so this is ignored, but we're correctly not generating one here, so our messages differ. Remove the clientToken."
    },{
	"ts": 1687013104,
	"action": "defaultMode",
	"comment": "Default mode (silent mode off) triggered via app"
    },{
	"ts": 1687013104,
	"action": "replace",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/delta",
	"regex": ",\"clientToken\":[^\\}]+",
	"replacement": "",
	"comment": "This delta message includes the app's client token. The Mongoose Shadow code assumes delta messages don't contain a clientToken, so this is ignored, but we're correctly not generating one here, so our messages differ. Remove the clientToken."
    },{
	"ts": 1687013104.878,
	"action": "ignore",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"comment": "AWS Shadow accepting the default mode message below from the app, with the app's ClientToken, which will be ignored as covered under ..151 above"
    },{
	"ts": 1687013105.325,
	"action": "replace",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"regex": "\"desired\"[^,]+,",
	"replacement": "",
	"comment": "This update accepted message includes a desired{} block and no client token. We also don't send a client token. Without one, it won't be processed Mongoose-side, but since we don't send a desired block, the messages don't match. Strip it."
    },{
	"ts": 1687013106.067,
	"action": "replace",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/delta",
	"regex": ",\"clientToken\":[^\\}]+",
	"replacement": "",
	"comment": "This delta message includes the app's client token. The Mongoose Shadow code assumes delta messages don't contain a clientToken, so this is ignored, but we're correctly not generating one here, so our messages differ. Remove the clientToken."
    },{
	"ts": 1687013106.067,
	"action": "swap",
	"versionOK": true,
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/delta",
	"comment": "In response to a change, AWS sometimes does update/delta then update/accepted and sometimes does update/accepted then update/delta. There's no apparent logic to this. We always do the latter. In this case, AWS did the former, so we'll swap that message order."
    },{
	"ts": 1687013647,
	"action": "ignore",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/rejected",
	"comment": "This is the Agrilution app sending an invalid update, ignore"
    },{
	"ts": 1687013649,
	"action": "ignore",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"comment": "AWS Shadow accepting a planting message from the app"
    },{
	"ts": 1687013649,
	"action": "bumpAWSVersion",
	"comment": "AWS Shadow accepts the update above"
    },{
	"ts": 1687013651,
	"action": "addPlant",
	"slot": "b9",
	"plantID": 96,
	"comment": "Plant Micro radish"
    },{
	"ts": 1687013652,
	"action": "ignore",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"comment": "AWS Shadow accepting a second planting message from the app"
    },{
	"ts": 1687013652,
	"action": "bumpAWSVersion",
	"comment": "AWS Shadow accepts the update above"
    },{
	"ts": 1687013772,
	"action": "ignore",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"comment": "AWS Shadow accepting a recipe update from Agrilution. See ...151 above"
    },{
	"ts": 1687014380.776,
	"action": "swap",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"comment": "This is two updates quickly after each other. We reply to the first, then the second. AWS does it the other way round, with messageId=1, messageId=2."
    },{
	"ts": 1687016070,
	"action": "setAWSVersion",
	"awsVersion": 938736,
	"comment": "There's a 26-minute gap in the dump here and we miss these versions"
    },{
	"ts": 1687035874.044,
	"action": "replace",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"regex": "1687035873",
	"replacement": "1687035874",
	"comment": "AWS gets the message slightly quicker than our buffer time"
    },{
	"ts": 1687064479.955,
	"action": "swap",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"comment": "This is two updates quickly after each other. We reply to the first, then the second. AWS does it the other way round, with messageId=1, messageId=2."
    },{
	"ts": 1687065749.914,
	"action": "swap",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"comment": "This is two updates quickly after each other. We reply to the first, then the second. AWS does it the other way round, with messageId=1, messageId=2."
    },{
	"ts": 1687087540,
	"action": "bumpAWSVersion",
	"comment": "This is after a reconnect so the client's will has bumped the version"
    },{
	"ts": 1687087549.425,
	"action": "replace",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/delta",
	"regex": ",\"clientToken\":[^\\}]+",
	"replacement": "",
	"comment": "This delta message includes the _device_'s client token. As above under ..151, this will be ignored and we don't generate it. Remove it."
    },{
	"ts": 1687115285,
	"action": "ignore",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/rejected",
	"comment": "This is the Agrilution app sending an invalid update, ignore"
    },{
	"ts": 1687115288,
	"action": "ignore",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"comment": "AWS Shadow accepting a harvesting message from the app"
    },{
	"ts": 1687115288,
	"action": "bumpAWSVersion",
	"comment": "AWS Shadow accepts the update above"
    },{
	"ts": 1687115291.408,
	"action": "harvest",
	"slot": "b8",
	"comment": "Harvest Micro radish. This also causes the update above, which bumps AWS version. We've slightly fudged the timestamp here to make the subsequent recipe update appear at the exact right time (3s off from where we'd otherwise generate it)."
    },{
	"ts": 1687115411.409,
	"action": "ignore",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"comment": "AWS Shadow accepting a recipe update from Agrilution. See ...151 above"
    },{
	"ts": 1687115669.373,
	"action": "swap",
	"versionOK": true,
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"comment": "This is two updates quickly after each other. We reply to the first, then the second. AWS does it the other way round, with messageId=1, messageId=2."
    },{
	"ts": 1687116939.447,
	"action": "swap",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"comment": "This is two updates quickly after each other. We reply to the first, then the second. AWS does it the other way round, with messageId=1, messageId=2."
    },{
	"ts": 1687150879.771,
	"action": "swap",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"comment": "This is two updates quickly after each other. We reply to the first, then the second. AWS does it the other way round, with messageId=1, messageId=2."
    },{
	"ts": 1687152149.630,
	"action": "swap",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"comment": "This is two updates quickly after each other. We reply to the first, then the second. AWS does it the other way round, with messageId=1, messageId=2."
    },{
	"ts": 1687181020.829,
	"action": "swap",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"comment": "This is two updates quickly after each other. We reply to the first, then the second. AWS does it the other way round, with messageId=1, messageId=2."
    },{
	"ts": 1687237280.059,
	"action": "swap",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"comment": "This is two updates quickly after each other. We reply to the first, then the second. AWS does it the other way round, with messageId=1, messageId=2."
    },{
	"ts": 1687238550.032,
	"action": "swap",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"comment": "This is two updates quickly after each other. We reply to the first, then the second. AWS does it the other way round, with messageId=1, messageId=2."
    },{
	"ts": 1687266151.073,
	"action": "swap",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"comment": "This is two updates quickly after each other. We reply to the first, then the second. AWS does it the other way round, with messageId=1, messageId=2."
    },{
	"ts": 1687267421.044,
	"action": "swap",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"comment": "This is two updates quickly after each other. We reply to the first, then the second. AWS does it the other way round, with messageId=1, messageId=2."
    },{
	"ts": 1687323679.357,
	"action": "swap",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"comment": "This is two updates quickly after each other. We reply to the first, then the second. AWS does it the other way round, with messageId=1, messageId=2."
    },{
	"ts": 1687324949.363,
	"action": "swap",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/accepted",
	"comment": "This is two updates quickly after each other. We reply to the first, then the second. AWS does it the other way round, with messageId=1, messageId=2."
    },{
	"ts": 1687329834.453,
	"action": "ignore",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/rejected",
	"comment": "This is the Agrilution app sending an invalid update, ignore"
    },{
	"ts": 1687329836.056,
	"action": "ignore",
	"msgTopic": "$aws/things/a8d39911-7955-47d3-981b-fbd9d52f9221/shadow/update/rejected",
	"comment": "This is the Agrilution app sending another invalid update, ignore"
    }
]
